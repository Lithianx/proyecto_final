<app-encabezado></app-encabezado>

<ion-content [fullscreen]="true" scroll-y="true" class="fondo-negro">

  <ion-button fill="clear" class="boton-volver" (click)="volverAtras()">
    <ion-icon name="arrow-back"></ion-icon>
  </ion-button>

  <div class="contenedor-evento">
    <ion-card class="card-monster" *ngIf="evento">
      <ion-card-header>
        <ion-card-title class="titulo-monster">🎮 {{ evento.nombre_evento }}</ion-card-title>
        <ion-card-subtitle class="subtitulo-monster">Creado por: [ {{ evento.id_creador }} ]</ion-card-subtitle>

        <!-- Estado con luz -->
        <div class="estado-luz-texto">
          <div class="estado-indicador" [ngClass]="{
            'verde': nombreEstado === 'DISPONIBLE',
            'amarillo': nombreEstado === 'EN CURSO',
            'rojo': nombreEstado === 'FINALIZADO',
            'naranja': nombreEstado === 'SIN CUPOS'
          }"></div>

          <div class="estado-texto" [ngClass]="{
            'texto-verde': nombreEstado === 'DISPONIBLE',
            'texto-amarillo': nombreEstado === 'EN CURSO',
            'texto-rojo': nombreEstado === 'FINALIZADO',
            'texto-naranja': nombreEstado === 'SIN CUPOS'
          }">
            Estado: {{ nombreEstado }}
          </div>
        </div>
      </ion-card-header>

      <ion-card-content class="contenido-scroll">
        <div class="contenido-evento">
          <div class="campo-evento campo-descripcion">
            <label>📝 Descripción</label>
            <p>{{ evento.descripcion }}</p>
          </div>

          <div class="fila-doble">
            <div class="campo-evento">
              <label>📍 Lugar</label>
              <p>{{ evento.lugar }}</p>
            </div>
            <div class="campo-evento">
              <label>🕒 Fecha Inicio</label>
              <p>{{ evento.fechaInicio | date: 'short' }}</p>
            </div>
          </div>

          <div class="fila-doble">
            <div class="campo-evento">
              <label>🎮 Juego</label>
              <p>{{ nombreJuego }}</p>
            </div>
            <div class="campo-evento">
              <label>👥 Cupos</label>
              <p>{{ evento.cupos }}</p>
            </div>
          </div>
        </div>

        <div class="boton-unirse-container" *ngIf="evento">
          <ion-button expand="block"
                      shape="round"
                      color="success"
                      [disabled]="!puedeUnirse"
                      (click)="unirseAlEvento()">
            {{ yaInscrito ? 'Ya inscrito' : 'Unirse al evento' }}
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

</ion-content>

<app-navbar></app-navbar>
