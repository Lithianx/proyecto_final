<app-encabezado></app-encabezado>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="game-controller" refreshingIcon="game-controller">
    </ion-refresher-content>
  </ion-refresher>

  <div class="fila-eventos">
    <ion-button fill="clear" class="boton-volver" (click)="volverAtras()">
      <ion-icon name="arrow-back"></ion-icon>
    </ion-button>
    <h2 class="titulo">Eventos Disponibles</h2>
  </div>

  <ion-searchbar (ionInput)="filtrarEventos($event)" placeholder="Buscar evento"></ion-searchbar>

  <ion-card *ngFor="let evento of eventosFiltrados" class="evento-card">
    <ion-card-header class="header-con-estado">
      <ion-card-title>{{ evento.nombre_evento }}</ion-card-title>
        <ion-card-subtitle>{{ evento.tipo_evento }}</ion-card-subtitle>
      <div class="info-evento">
        <div class="estado-luz-texto">
          <div class="estado-indicador" [ngClass]="{
        'verde': evento.estado === 'DISPONIBLE',
        'amarillo': evento.estado === 'EN_CURSO',
        'rojo': evento.estado === 'FINALIZADO',
        'naranja': evento.estado === 'SIN_CUPOS'
        }">
        </div>

        <div class="estado-texto" [ngClass]="{
        'texto-verde': evento.estado === 'DISPONIBLE',
        'texto-amarillo': evento.estado === 'EN_CURSO',
        'texto-rojo': evento.estado === 'FINALIZADO',
        'texto-naranja': evento.estado === 'SIN_CUPOS'
      }">
            {{ evento.estado }}
          </div>
        </div>

        
      </div>
    </ion-card-header>



    <ion-card-content>
      <p>
        <strong>Lugar:</strong> {{ evento.lugar }}<span style="color: rgb(44, 236, 19);"> | </span>
        <strong>Inicio:</strong> {{ evento.fechaInicio | date: 'short' }}
      </p>
      <p><strong>Cupos:</strong> {{ evento.cupos }}</p>
      <p>
        <strong>Creado por:</strong>
        <span style="color: rgb(15, 209, 167);"> [{{ evento.creado_por }}]</span>
      </p>

      <div class="botones-evento">
        <ion-button expand="block" class="boton-unirse" [routerLink]="['/detalle-evento', evento.id]">
          VER EVENTO
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>

<app-navbar></app-navbar>